#cloud-config
# Ubuntu Autoinstall Configuration
# Generated by Ubuntu FAI Build System

autoinstall:
  version: 1
  
  # Locale and keyboard configuration
  locale: en_US.UTF-8
  keyboard:
    layout: us
    variant: ""
  
  # Network configuration
  network:
    version: 2
    ethernets:
      eth0:
        dhcp4: {{ config.network.dhcp | lower }}
        dhcp6: {{ config.network.dhcp | lower }}
  
  # Storage configuration
  storage:
    layout:
      name: direct
      match:
        size: largest
  
  # Identity and user configuration
  identity:
    hostname: "{{ config.network.hostname }}"
    username: "{{ config.user.username }}"
    realname: "{{ config.user.full_name }}"
  
  # SSH configuration
  ssh:
    install-server: true
    allow-pw: true
  
  # Package configuration
  packages:
    - ubuntu-desktop
    - ubuntu-desktop-minimal
    - gdm3
    - firefox
    - curl
    - wget
    - git
    - vim
    - nano
    - htop
  
  # Late commands
  late-commands:
    - curtin in-target -- apt-get update
    - curtin in-target -- apt-get autoremove -y
    - curtin in-target -- apt-get autoclean
  
  # Power off after installation
  shutdown: poweroff